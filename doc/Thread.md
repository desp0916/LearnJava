# 细说多线程之Thread VS Runnable

[慕课网 - 细说多线程之Thread VS Runnable](http://www.imooc.com/learn/312)

## 2-1 回顾线程创建的两种方式

http://www.imooc.com/video/6096

兩種方法的比較：

  - Runnable 方式可以避免由於 Java 單繼承特性帶來的缺陷
  - Runnable 的代碼可以被多個執行緒(Thread實例)共享，適合於多個執行緒處理同一資源的情況


## 3-1 线程的生命周期

http://www.imooc.com/video/6213

```
           +--- 阻塞狀態  <---+
           |              |
           v              |
創建  -----> 就緒狀態 -----> 運行狀態 -----> 終止

```

  - 創建：新建一個執行緒對象，如 ``` Thread thd = new Thread()```。 
  - 就緒：創建了執行緒物件後，調用了執行緒的 ``` start()``` 方法（注意：此時執行緒只是進入了執行緒佇列，等待獲取 CPU 服務，具備了運行的條件，但並不一定已經開始運行了）。 
  - 運行：處於就緒狀態的執行緒，一旦獲取了 CPU 資源，便進入到運行狀態，開始執行 ```run()``` 方法裡面的邏輯。 
  - 阻塞：執行緒的  ```run()``` 方法執行完畢，或者執行緒調用了  ```start()``` 方法，執行緒便進入終止狀態。
  - 阻塞：一個正在執行的執行緒在某些情況下，由於某種原因而暫時讓出了 CPU 資源，暫停了自己的執行，便進入了阻塞狀態，如調用了 ```sleep()``` 方法
 

## 3-2 守护线程理论知识

http://www.imooc.com/video/6309

1. Java 執行緒有兩類：
 
  - 用戶執行緒：運行在前台，執行具體的任務
     * 如程式的主執行緒、連接網路的子執行緒等都是用戶執行緒作。
  - 守護執行緒：運行在後台，為其他前台執行緒服務
     * 特點：一旦所有用戶執行緒結束運行，守護執行緒會隨 JVM 一起結束工作。
     * 應用：資料庫連接池中的監測執行緒、JVM 啟動後的監測執行緒作。
     * 最常見的守護執行緒：垃圾回收執行緒作。
     
2. 如何設置守護執行緒：

  - 可以通過調用 Thread 類的 ```setDaemon(true)``` 方法來設置當前的執行緒為守護執行緒
  - 注意事項：
    * ```setDaemon(true)``` 必須在 ```start()``` 方法之前調用，否則會拋出 ```IllegalThreadStateException``` 異常 作。
    * 在守護執行緒中產生的新執行緒也是守護執行緒作。
    * 不是所有的任務都可以分配給守護執行緒來執行，比如讀寫操作或者計算邏輯作。
